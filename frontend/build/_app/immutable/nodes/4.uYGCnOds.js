import{a as c,t as w,b as V}from"../chunks/disclose-version.CWWACKTL.js";import"../chunks/legacy.DZDO77d0.js";import{p as E,t as j,a as G,c as e,g as r,m as h,b as x,n as A,r as o,s,d}from"../chunks/runtime.Bs8s2Cqe.js";import{d as I,e as K,s as Q}from"../chunks/render.ouz2EBKM.js";import{i as D}from"../chunks/if.CnEAnunN.js";import{r as y}from"../chunks/attributes.Da7CgcoU.js";import{b as _}from"../chunks/input.CP4Dq1az.js";import{i as R}from"../chunks/lifecycle.CksSxylQ.js";import{g as U}from"../chunks/entry.Ca5uQbHT.js";var W=()=>window.history.back(),X=w('<div class="rounded-md bg-red-50 p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800"> </h3></div></div></div>'),Y=w('<svg class="mr-2 h-4 w-4 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Creating...',1),Z=w('<div class="container mx-auto px-4 py-8"><div class="mb-6 flex items-center gap-4"><button class="rounded-md bg-slate-200 px-2 py-1 text-xs hover:bg-slate-400">back</button> <h1 class="text-2xl font-bold">New Book</h1></div> <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><form class="space-y-4"><div><label for="title" class="block text-sm font-medium text-gray-700">Title</label> <input type="text" id="title" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></div> <div><label for="author" class="block text-sm font-medium text-gray-700">Author</label> <input type="text" id="author" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></div> <div><label for="category" class="block text-sm font-medium text-gray-700">Category</label> <input type="text" id="category" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></div> <!> <div class="flex justify-end"><button type="submit" class="inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"><!></button></div></form></div></div>');function dt(F,N){E(N,!1);let a=x({title:"",author:"",category:""}),l=x(null),n=x(!1);async function O(t){t.preventDefault(),d(n,!0),d(l,null);try{(await fetch("/api/books/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r(a))})).ok?U("/books"):d(l,"Failed to create book")}catch(i){d(l,"Failed to create book"),console.error(i)}finally{d(n,!1)}}R();var v=Z(),m=e(v),H=e(m);H.__click=[W],A(2),o(m);var k=s(m,2),u=e(k),f=e(u),C=s(e(f),2);y(C),o(f);var p=s(f,2),z=s(e(p),2);y(z),o(p);var b=s(p,2),B=s(e(b),2);y(B),o(b);var L=s(b,2);D(L,()=>r(l),t=>{var i=X(),M=e(i),S=s(e(M),2),T=e(S),P=e(T,!0);o(T),o(S),o(M),o(i),j(()=>Q(P,r(l))),c(t,i)});var q=s(L,2),g=e(q),J=e(g);D(J,()=>r(n),t=>{var i=Y();A(),c(t,i)},t=>{var i=V("Create Book");c(t,i)}),o(g),o(q),o(u),o(k),o(v),j(()=>g.disabled=r(n)),K("submit",u,O),_(C,()=>r(a).title,t=>h(a,r(a).title=t)),_(z,()=>r(a).author,t=>h(a,r(a).author=t)),_(B,()=>r(a).category,t=>h(a,r(a).category=t)),c(F,v),G()}I(["click"]);export{dt as component};
