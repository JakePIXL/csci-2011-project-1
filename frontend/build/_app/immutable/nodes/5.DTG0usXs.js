import{a as i,t as p,c as U}from"../chunks/disclose-version.CWWACKTL.js";import"../chunks/legacy.DZDO77d0.js";import{p as V,a as W,d as F,c as a,f as X,g as t,t as J,b as S,n as Y,r as e,s as d}from"../chunks/runtime.Bs8s2Cqe.js";import{d as Z,s as n}from"../chunks/render.ouz2EBKM.js";import{i as A}from"../chunks/if.CnEAnunN.js";import{e as tt,i as et}from"../chunks/each.Dei1YSep.js";import{t as u}from"../chunks/class.Di9CBhOt.js";import{i as at}from"../chunks/lifecycle.CksSxylQ.js";import{o as rt}from"../chunks/index-client.BSckvdmv.js";import{i as st}from"../chunks/entry.Ca5uQbHT.js";var ot=()=>window.history.back(),it=p('<div class="text-center">Loading...</div>'),dt=p('<div class="text-red-500"> </div>'),lt=(D,_,x)=>_(t(x).id),nt=p('<button class="text-blue-600 hover:text-blue-900">Return</button>'),pt=p('<tr><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"><span class="rounded-full px-2 py-1 text-xs font-semibold"> </span></td><td class="whitespace-nowrap px-6 py-4"><!></td></tr>'),ct=p('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Book</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Borrower</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Borrow Date</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Return Date</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Status</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Actions</th></tr></thead><tbody class="divide-y divide-gray-200 bg-white"></tbody></table></div>'),xt=p('<div class="container mx-auto px-4 py-8"><div class="mb-6 flex items-center justify-between"><div class="flex flex-row items-center gap-4"><button class="rounded-md bg-slate-200 px-2 py-1 text-xs hover:bg-slate-400">back</button> <h1 class="text-2xl font-bold">Borrowings</h1></div></div> <!></div>');function kt(D,_){V(_,!1);let x=S([]),O=S(!0),m=S(null);rt(async()=>{try{const s=await fetch("/api/borrows/");F(x,await s.json())}catch{F(m,"Failed to load borrowings")}finally{F(O,!1)}});async function L(s){try{(await fetch("/api/borrows/return/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({book_id:s})})).ok?st():console.log("Failed to return book")}catch{console.log("Failed to return book")}}at();var f=xt(),y=a(f),R=a(y),M=a(R);M.__click=[ot],Y(2),e(R),e(y);var N=d(y,2);A(N,()=>t(O),s=>{var c=it();i(s,c)},s=>{var c=U(),P=X(c);A(P,()=>t(m),h=>{var o=dt(),v=a(o,!0);e(o),J(()=>n(v,t(m))),i(h,o)},h=>{var o=ct(),v=a(o),T=d(a(v));tt(T,5,()=>t(x),et,(q,r)=>{var b=pt(),g=a(b),z=a(g);e(g);var w=d(g),E=a(w,!0);e(w);var k=d(w),G=a(k,!0);e(k);var B=d(k),H=a(B,!0);e(B);var j=d(B),l=a(j),I=a(l,!0);e(l),e(j);var $=d(j),K=a($);A(K,()=>!t(r).return_date,Q=>{var C=nt();C.__click=[lt,L,r],i(Q,C)}),e($),e(b),J(()=>{n(z,`${t(r).title??""} by ${t(r).author??""}`),n(E,t(r).borrower),n(G,t(r).borrow_date),n(H,t(r).return_date||"-"),u(l,"bg-yellow-100",!t(r).return_date),u(l,"text-yellow-800",!t(r).return_date),u(l,"bg-green-100",t(r).return_date),u(l,"text-green-800",t(r).return_date),n(I,t(r).return_date?"returned":"borrowed")}),i(q,b)}),e(T),e(v),e(o),i(h,o)},!0),i(s,c)}),e(f),i(D,f),W()}Z(["click"]);export{kt as component};
