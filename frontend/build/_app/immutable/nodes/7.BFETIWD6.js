import{a as G,t as V}from"../chunks/disclose-version.CWWACKTL.js";import{p as re,t as c,a as se,c as t,s as a,n as K,r as e,g as d}from"../chunks/runtime.Bs8s2Cqe.js";import{d as oe,e as ie,s as p}from"../chunks/render.ouz2EBKM.js";import{e as de,i as le}from"../chunks/each.Dei1YSep.js";import{r as u,s as ne}from"../chunks/attributes.Da7CgcoU.js";import{t as b}from"../chunks/class.Di9CBhOt.js";import{b as v}from"../chunks/input.CP4Dq1az.js";import{p as me}from"../chunks/props.CMOhw33a.js";import{g as Q}from"../chunks/entry.Ca5uQbHT.js";const pe=async({params:m,fetch:l})=>{const[o,i]=await Promise.all([l(`/api/members/${m.id}`),l(`/api/borrows/${m.id}`)]),x=await o.json(),f=await i.json();return{member:x,borrowings:f}},je=Object.freeze(Object.defineProperty({__proto__:null,load:pe},Symbol.toStringTag,{value:"Module"}));var ce=()=>window.history.back(),ue=(m,l)=>l(),be=V('<tr><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"> </td><td class="whitespace-nowrap px-6 py-4"><span class="inline-flex rounded-full px-2 text-xs font-semibold leading-5"> </span></td></tr>'),ve=V('<div class="container mx-auto bg-white px-6 py-8"><div class="flex flex-col space-y-6"><div class="flex items-center justify-between"><div class="flex flex-row items-center gap-4"><button class="rounded-md bg-slate-200 px-2 py-1 text-xs hover:bg-slate-400">back</button> <h1 class="text-2xl font-bold">Members</h1></div> <div class="flex flex-row items-center gap-4"><a class="rounded-md bg-green-500 px-4 py-2 text-white hover:bg-green-600">New Checkout</a> <button class="rounded-md bg-red-500 px-4 py-2 text-white hover:bg-red-600">Delete Member</button></div></div> <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><h2 class="text-xl font-semibold text-gray-800">Personal Information</h2> <form class="mt-4 space-y-4"><div><label class="text-sm font-medium text-gray-600" for="first_name">First Name</label> <input type="text" id="first_name" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"></div> <div><label class="text-sm font-medium text-gray-600" for="last_name">Last Name</label> <input type="text" id="last_name" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"></div> <div><label class="text-sm font-medium text-gray-600" for="email">Email</label> <input type="email" id="email" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"></div> <div><label class="text-sm font-medium text-gray-600" for="phone">Phone</label> <input type="tel" id="phone" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"></div> <button type="submit" class="mt-4 rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Update Information</button></form></div></div></div> <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><h2 class="text-xl font-semibold text-gray-800">Borrowing History</h2> <div class="mt-4 overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Book Title</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Author</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Borrow Date</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Return Date</th><th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Status</th></tr></thead><tbody class="divide-y divide-gray-200 bg-white"></tbody></table></div></div></div></div>');function Me(m,l){re(l,!0);let o=me(l,"data",7),i={first_name:o().member.first_name,last_name:o().member.last_name,email:o().member.email,phone:o().member.phone||""};async function x(){try{const r=await fetch(`/api/members/${o().member.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(r.ok){const s=await r.json();o().member=s,Q("/members")}else console.log("Failed to update member")}catch{console.log("Failed to update member")}}async function f(){try{(await fetch(`/api/members/${o().member.id}`,{method:"DELETE"})).ok?Q("/members"):console.log("Failed to delete member")}catch{console.log("Failed to delete member")}}var g=ve(),T=t(g),y=t(T),_=t(y),W=t(_);W.__click=[ce],K(2),e(_);var $=a(_,2),E=t($),X=a(E,2);X.__click=[ue,f],e($),e(y);var h=a(y,2),L=t(h),B=t(L),w=a(t(B),2),k=t(w),O=a(t(k),2);u(O),e(k);var D=a(k,2),R=a(t(D),2);u(R),e(D);var j=a(D,2),C=a(t(j),2);u(C),e(j);var I=a(j,2),U=a(t(I),2);u(U),e(I),K(2),e(w),e(B),e(L),e(h);var z=a(h,2),A=a(t(z),2),H=t(A),J=a(t(H));de(J,21,()=>o().borrowings,le,(r,s)=>{var M=be(),S=t(M),Y=t(S);e(S);var F=a(S),Z=t(F,!0);e(F);var N=a(F),ee=t(N,!0);c(()=>p(ee,new Date(d(s).borrow_date).toLocaleDateString())),e(N);var P=a(N),te=t(P,!0);c(()=>p(te,d(s).return_date?new Date(d(s).return_date).toLocaleDateString():"Not returned")),e(P);var q=a(P),n=t(q),ae=t(n,!0);e(n),e(q),e(M),c(()=>{p(Y,`"${d(s).title??""}"`),p(Z,d(s).author),b(n,"bg-yellow-100",d(s).status==="borrowed"),b(n,"text-yellow-800",d(s).status==="borrowed"),b(n,"bg-green-100",d(s).status==="available"),b(n,"text-green-800",d(s).status==="available"),p(ae,d(s).status==="available"?"returned":"borrowed")}),G(r,M)}),e(J),e(H),e(A),e(z),e(T),e(g),c(()=>ne(E,"href",`/members/${o().member.id}/new`)),ie("submit",w,x),v(O,()=>i.first_name,r=>i.first_name=r),v(R,()=>i.last_name,r=>i.last_name=r),v(C,()=>i.email,r=>i.email=r),v(U,()=>i.phone,r=>i.phone=r),G(m,g),se()}oe(["click"]);export{Me as component,je as universal};
